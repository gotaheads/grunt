<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>Growth of Licences in Gippsland</title>
    <!--[if IE]>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <![endif]-->

    <script src="http://d3js.org/d3.v2.min.js" charset="utf-8"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>

    <script src="xcharts/xcharts.js"></script>
    <script src="xcharts/rainbow.min.js"></script>
    <link rel="stylesheet" href="xcharts/xcharts.css">
    <link rel="stylesheet" href="xcharts/master.css">

    <style>
        .xchart .errorLine path {
            stroke: #C6080D;
            stroke-width: 3px;
        }
    </style>

</head>
<body>

<section>

    <article class="example">
        <div class="row guttered">
            <div class="span12">
                <figure id="myChart"></figure>
            </div>
        </div>
    </article>

</section>


<script>

    var tt = document.createElement('div'),
            leftOffset = -(~~$('html').css('padding-left').replace('px', '') + ~~$('body').css('margin-left').replace('px', '')),
            topOffset = -32;
    tt.className = 'ex-tooltip';
    document.body.appendChild(tt);

    var data = {
        "xScale": "time",
        "yScale": "linear",
        "main": [
            {
                "className": ".growth-licences",
                "data": [
                    {
                        "x": "2004-01-01",
                        "y": 157400.4
                    },
                    {
                        "x": "2005-01-01",
                        "y": 158750.1
                    },
                    {
                        "x": "2006-01-01",
                        "y": 159525.2
                    },
                    {
                        "x": "2007-01-01",
                        "y": 161241.2
                    },
                    {
                        "x": "2008-01-01",
                        "y": 163165
                    },
                    {
                        "x": "2009-01-01",
                        "y": 163847.5
                    },
                    {
                        "x": "2010-01-01",
                        "y": 165294.3
                    }
                ]
            },
            {
                "className": ".growth-licences",
                "data": [
                    {
                        "x": "2004-01-01",
                        "y": 44546.4
                    },
                    {
                        "x": "2005-01-01",
                        "y": 72069
                    },
                    {
                        "x": "2006-01-01",
                        "y": 84190.3
                    },
                    {
                        "x": "2007-01-01",
                        "y": 89746.4
                    },
                    {
                        "x": "2008-01-01",
                        "y": 88873.6
                    },
                    {
                        "x": "2009-01-01",
                        "y": 49276.3
                    },
                    {
                        "x": "2010-01-01",
                        "y": 54745.7
                    }
                ]
            }
        ]
    };

    var opts = {
        "dataFormatX": function (x) { return d3.time.format('%Y-%m-%d').parse(x); },
        "tickFormatX": function (x) { return d3.time.format('%Y')(x); },
        "mouseover": function (d, i) {

            var pos = $(this).offset();
            $(tt).text(d3.time.format('%Y')(d.x) + ': ' + d.y)
                    .css({top: topOffset + pos.top, left: pos.left + leftOffset})
                    .show();
        },
        "mouseout": function (x) {
            $(tt).hide();
        }
    };

    var myChart = new xChart('line-dotted', data, '#myChart', opts);

</script>

</body>
</html>
